asyncapi: 3.0.0
info:
  title: Java Quarkus WebSocket Client Test
  version: 1.0.0
  description: AsyncAPI document for testing all Java Quarkus WebSocket client components

servers:
  withPathname:
    host: test.example.com
    protocol: wss
    pathname: /v1/api
    description: Server with explicit pathname

  withoutPathname:
    host: test.example.com
    protocol: wss
    description: Server without pathname (should default to /)

channels:
  channelWithQueryParams:
    address: /test
    bindings:
      ws:
        bindingVersion: 0.1.0
        query:
          type: object
          description: Query parameters for WebSocket connection
          properties:
            token:
              type: string
              description: Authentication token
              default: "default_token"
            
            session_id:
              type: string
              description: Session identifier
            
            heartbeat:
              type: boolean
              description: Enable heartbeat
              default: false
            
            app_id:
              type: string
              description: Application identifier
    messages:
      testMessage:
        summary: Test message with string payload
        payload:
          type: string
          description: Simple string message

  channelWithoutQueryParams:
    address: /simple
    description: Channel without query parameters
    messages:
      simpleMessage:
        summary: Simple message without query params
        payload:
          type: string

operations:
  sendMessage:
    action: send
    channel:
      $ref: '#/channels/channelWithQueryParams'
    summary: Send a test message
    description: First send operation for testing single operation handling
    messages:
      - $ref: '#/channels/channelWithQueryParams/messages/testMessage'
 
  sendDataUpdate:
    action: send
    channel:
      $ref: '#/channels/channelWithQueryParams'
    summary: Send data update
    description: Tests camelCase operation ID conversion to Java method name
    messages:
      - $ref: '#/channels/channelWithQueryParams/messages/testMessage'

  SendNotification:
    action: send
    channel:
      $ref: '#/channels/channelWithQueryParams'
    summary: Send notification
    description: Tests PascalCase operation ID conversion
    messages:
      - $ref: '#/channels/channelWithQueryParams/messages/testMessage'
  
  send_status_update:
    action: send
    channel:
      $ref: '#/channels/channelWithQueryParams'
    summary: Send status update
    description: Tests snake_case operation ID conversion to camelCase method
    messages:
      - $ref: '#/channels/channelWithQueryParams/messages/testMessage'

  sendWithoutSummary:
    action: send
    channel:
      $ref: '#/channels/channelWithQueryParams'
    description: Operation without summary field
    messages:
      - $ref: '#/channels/channelWithQueryParams/messages/testMessage'

  receiveMessage:
    action: receive
    channel:
      $ref: '#/channels/channelWithQueryParams'
    summary: Receive a test message
    messages:
      - $ref: '#/channels/channelWithQueryParams/messages/testMessage'
  
  receiveSimple:
    action: receive
    channel:
      $ref: '#/channels/channelWithoutQueryParams'
    summary: Receive simple message
    messages:
      - $ref: '#/channels/channelWithoutQueryParams/messages/simpleMessage'