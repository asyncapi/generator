{"version":3,"file":"client.js.js","sources":["../components/FileHeaderInfo.js","../components/Requires.js","../template/client.js.js"],"sourcesContent":["import { Text } from '@asyncapi/generator-react-sdk';\n\nexport function FileHeaderInfo({ info, server }) {\n  return (\n    <Text>\n      <Text>\n        {'//////////////////////////////////////////////////////////////////////'}\n      </Text>\n      \n      <Text>\n        {'//'}\n      </Text>\n\n      <Text>\n        {'//'} {info.title()} - {info.version()}\n      </Text>\n\n      <Text>\n        {'//'} Protocol: {server.protocol()}\n      </Text>\n\n      <Text>\n        {'//'} Host: {server.host()}\n      </Text>\n\n      {server.hasPathname() && (\n        <Text>\n          {'//'} Path: {server.pathname()}\n        </Text>\n      )}\n\n      <Text>\n        {'//'}\n      </Text>\n\n      <Text>\n        {'//////////////////////////////////////////////////////////////////////'}\n      </Text>\n    </Text>\n  );\n}","import { Text } from '@asyncapi/generator-react-sdk';\n\nexport function Requires() {\n  return (\n    <Text>\n      <Text>\n        const WebSocket = require('ws');\n      </Text>\n    </Text>\n  );\n}\n\n","import { File, Text } from '@asyncapi/generator-react-sdk';\nimport { getClientName, getServerUrl } from '@asyncapi/generator-helpers';\nimport { FileHeaderInfo }  from '../components/FileHeaderInfo';\nimport { Requires } from '../components/Requires';\n\nexport default function({ asyncapi, params }) {\n  const server = asyncapi.servers().get(params.server);\n  const info = asyncapi.info();\n  const title = info.title();\n  //TODO at this moment this template shows usage of granular components and also generic Text component with lots of code but also not so nice to read. We need to figure the best way of handling this.\n  return (\n    <File name={params.clientFileName}>\n      <FileHeaderInfo\n        info={info}\n        server={server}\n      />\n      <Requires/>\n      <Text>\n        {`class ${getClientName(info)} {\n  constructor() {\n    this.url = '${getServerUrl(server)}';\n    this.websocket = null;\n    this.messageHandlers = [];\n    this.errorHandlers = [];\n  }\n\n  // Method to establish a WebSocket connection\n  connect() {\n    return new Promise((resolve, reject) => {\n      this.websocket = new WebSocket(this.url);\n\n      // On successful connection\n      this.websocket.onopen = () => {\n        console.log('Connected to ${title} server');\n        resolve();\n      };\n\n      // On receiving a message\n      this.websocket.onmessage = (event) => {\n        console.log('Message received:', event.data);\n\n        this.messageHandlers.forEach(handler => {\n          if (typeof handler === 'function') {\n            this.handleMessage(event.data, handler);\n          }\n        });\n      };\n\n      // On error first call custom error handlers, then default error behavior\n      this.websocket.onerror = (error) => {\n        if (this.errorHandlers.length > 0) {\n          // Call custom error handlers\n          this.errorHandlers.forEach(handler => handler(error));\n        } else {\n          // Default error behavior\n          console.error('WebSocket Error:', error);\n        }\n        reject(error);\n      };\n\n      // On connection close\n      this.websocket.onclose = () => {\n        console.log('Disconnected from ${title} server');\n      };\n    });\n  }\n\n  // Method to register custom error handlers\n  registerMessageHandler(handler) {\n    if (typeof handler === 'function') {\n      this.messageHandlers.push(handler);\n    } else {\n      console.warn('Message handler must be a function');\n    }\n  }\n\n  // Method to register custom error handlers\n  registerErrorHandler(handler) {\n    if (typeof handler === 'function') {\n      this.errorHandlers.push(handler);\n    } else {\n      console.warn('Error handler must be a function');\n    }\n  }\n\n  // Method to handle message with callback\n  handleMessage(message, cb) {\n    if (cb) cb(message);\n  }\n\n  // Method to send an echo message to the server\n  sendEchoMessage(message) {\n    this.websocket.send(JSON.stringify(message));\n    console.log('Sent message to echo server:', message);\n  }\n\n  // Method to close the WebSocket connection\n  close() {\n    if (this.websocket) {\n      this.websocket.close();\n      console.log('WebSocket connection closed.');\n    }\n  }\n}\n\nmodule.exports = ${getClientName(info)};`}\n      </Text>\n    </File>);\n}"],"names":["FileHeaderInfo","info","server","_jsxs","Text","children","_jsx","title","version","protocol","host","hasPathname","pathname","Requires","asyncapi","params","servers","get","File","name","clientFileName","getClientName","getServerUrl"],"mappings":";;;;;;;AAEO,SAASA,cAAcA,CAAC;EAAEC,IAAI;AAAEC,EAAAA,MAAAA;AAAO,CAAC,EAAE;EAC/C,oBACEC,eAAA,CAACC,sBAAI,EAAA;IAAAC,QAAA,EAAA,cACHC,cAAA,CAACF,sBAAI,EAAA;AAAAC,MAAAA,QAAA,EACF,wEAAA;AAAwE,KACrE,CAAC,eAEPC,cAAA,CAACF,sBAAI,EAAA;AAAAC,MAAAA,QAAA,EACF,IAAA;AAAI,KACD,CAAC,eAEPF,eAAA,CAACC,sBAAI,EAAA;AAAAC,MAAAA,QAAA,GACF,IAAI,EAAC,GAAC,EAACJ,IAAI,CAACM,KAAK,EAAE,EAAC,KAAG,EAACN,IAAI,CAACO,OAAO,EAAE,CAAA;AAAA,KACnC,CAAC,eAEPL,eAAA,CAACC,sBAAI,EAAA;MAAAC,QAAA,EAAA,CACF,IAAI,EAAC,aAAW,EAACH,MAAM,CAACO,QAAQ,EAAE,CAAA;AAAA,KAC/B,CAAC,eAEPN,eAAA,CAACC,sBAAI,EAAA;MAAAC,QAAA,EAAA,CACF,IAAI,EAAC,SAAO,EAACH,MAAM,CAACQ,IAAI,EAAE,CAAA;KACvB,CAAC,EAENR,MAAM,CAACS,WAAW,EAAE,iBACnBR,eAAA,CAACC,sBAAI,EAAA;MAAAC,QAAA,EAAA,CACF,IAAI,EAAC,SAAO,EAACH,MAAM,CAACU,QAAQ,EAAE,CAAA;AAAA,KAC3B,CACP,eAEDN,cAAA,CAACF,sBAAI,EAAA;AAAAC,MAAAA,QAAA,EACF,IAAA;AAAI,KACD,CAAC,eAEPC,cAAA,CAACF,sBAAI,EAAA;AAAAC,MAAAA,QAAA,EACF,wEAAA;AAAwE,KACrE,CAAC,CAAA;AAAA,GACH,CAAC,CAAA;AAEX;;ACtCO,SAASQ,QAAQA,GAAG;EACzB,oBACEP,cAAA,CAACF,sBAAI,EAAA;IAAAC,QAAA,eACHC,cAAA,CAACF,sBAAI,EAAA;AAAAC,MAAAA,QAAA,EAAC,kCAAA;KAEA,CAAA;AAAC,GACH,CAAC,CAAA;AAEX;;ACLe,kBAAS,EAAA;EAAES,QAAQ;AAAEC,EAAAA,MAAAA;AAAO,CAAC,EAAE;AAC5C,EAAA,MAAMb,MAAM,GAAGY,QAAQ,CAACE,OAAO,EAAE,CAACC,GAAG,CAACF,MAAM,CAACb,MAAM,CAAC,CAAA;AACpD,EAAA,MAAMD,IAAI,GAAGa,QAAQ,CAACb,IAAI,EAAE,CAAA;AAC5B,EAAA,MAAMM,KAAK,GAAGN,IAAI,CAACM,KAAK,EAAE,CAAA;AAC1B;EACA,oBACEJ,eAAA,CAACe,sBAAI,EAAA;IAACC,IAAI,EAAEJ,MAAM,CAACK,cAAe;IAAAf,QAAA,EAAA,cAChCC,cAAA,CAACN,cAAc,EAAA;AACbC,MAAAA,IAAI,EAAEA,IAAK;AACXC,MAAAA,MAAM,EAAEA,MAAAA;KACT,CAAC,eACFI,cAAA,CAACO,QAAQ,IAAC,CAAC,eACXP,cAAA,CAACF,sBAAI,EAAA;AAAAC,MAAAA,QAAA,EACF,CAAA,MAAA,EAASgB,8BAAa,CAACpB,IAAI,CAAC,CAAA;AACrC;AACA,gBAAkBqB,EAAAA,6BAAY,CAACpB,MAAM,CAAC,CAAA;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAA,EAAoCK,KAAK,CAAA;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAA,EAAyCA,KAAK,CAAA;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAmBc,EAAAA,8BAAa,CAACpB,IAAI,CAAC,CAAA,CAAA,CAAA;AAAG,KAC7B,CAAC,CAAA;AAAA,GACH,CAAC,CAAA;AACX;;;;"}