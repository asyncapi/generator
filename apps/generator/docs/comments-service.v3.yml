asyncapi: 3.0.0
info:
  title: Temperature Service
  version: 1.0.0
  description: Service that emits temperature changes from a bedroom sensor.

servers:
  production:
    host: broker.example.com
    protocol: mqtt

channels:
  temperatureChanged:
    address: temperature/changed
    messages:
      temperatureChange:
        description: Message sent when the temperature in the bedroom changes.
        payload:
          $ref: '#/components/schemas/Temperature'

operations:
  sendTemperatureChanged:
    action: send
    summary: Temperature changes are pushed to the broker
    channel:
      $ref: '#/channels/temperatureChanged'

components:
  schemas:
    Temperature:
      type: object
      additionalProperties: false
      properties:
        value:
          type: number
        unit:
          type: string
