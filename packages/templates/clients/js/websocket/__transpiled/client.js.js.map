{"version":3,"file":"client.js.js","sources":["../helpers/utils.js","../components/FileHeaderInfo.js","../components/Requires.js","../template/client.js.js"],"sourcesContent":["/**\n * Get client name from AsyncAPI info.title\n *\n * @param {object} info - The AsyncAPI info object.\n */\nfunction getClientName(info) {\n  const title = info.title();\n  \n  // Remove spaces, make the first letter uppercase, and add \"Client\" at the end\n  return `${title.replace(/\\s+/g, '') // Remove all spaces\n    .replace(/^./, char => char.toUpperCase()) // Make the first letter uppercase\n  }Client`;\n};\n  \nexport { getClientName };\n  ","import { Text } from '@asyncapi/generator-react-sdk';\n\nexport function FileHeaderInfo({ info, server }) {\n  return (\n    <Text>\n      <Text>\n        {'//////////////////////////////////////////////////////////////////////'}\n      </Text>\n      \n      <Text>\n        {'//'}\n      </Text>\n\n      <Text>\n        {'//'} {info.title()} - {info.version()}\n      </Text>\n\n      <Text>\n        {'//'} Protocol: {server.protocol()}\n      </Text>\n\n      <Text>\n        {'//'} Host: {server.host()}\n      </Text>\n\n      {server.hasPathname() && (\n        <Text>\n          {'//'} Path: {server.pathname()}\n        </Text>\n      )}\n\n      <Text>\n        {'//'}\n      </Text>\n\n      <Text>\n        {'//////////////////////////////////////////////////////////////////////'}\n      </Text>\n    </Text>\n  );\n}","import { Text } from '@asyncapi/generator-react-sdk';\n\nexport function Requires() {\n  return (\n    <Text>\n      <Text>\n        const WebSocket = require('ws');\n      </Text>\n    </Text>\n  );\n}\n\n","import { File, Text } from '@asyncapi/generator-react-sdk';\nimport { getClientName } from '../helpers/utils';\nimport { FileHeaderInfo }  from '../components/FileHeaderInfo';\nimport { Requires } from '../components/Requires';\n\nexport default function({ asyncapi, params }) {\n  const server = asyncapi.servers().get(params.server);\n  const info = asyncapi.info();\n  const title = info.title();\n\n  return (\n    <File name=\"client.js\">\n      <FileHeaderInfo\n        info={info}\n        server={server}\n      />\n      <Requires/>\n      <Text>\n        {`class ${getClientName(info)} {\n  constructor() {\n    this.url = '${server.host()}';\n    this.websocket = null;\n    this.messageHandlers = [];\n  }\n\n  // Method to establish a WebSocket connection\n  connect() {\n    return new Promise((resolve, reject) => {\n      this.websocket = new WebSocket(this.url);\n\n      // On successful connection\n      this.websocket.onopen = () => {\n        console.log('Connected to ${title} server');\n        resolve();\n      };\n\n      // On receiving a message\n      this.websocket.onmessage = (event) => {\n        console.log('Message received:', event.data);\n\n        this.messageHandlers.forEach(handler => {\n          if (typeof handler === 'function') {\n            this.handleMessage(event.data, handler);\n          }\n        });\n      };\n\n      // On error\n      this.websocket.onerror = (error) => {\n        console.error('WebSocket Error:', error);\n        reject(error);\n      };\n\n      // On connection close\n      this.websocket.onclose = () => {\n        console.log('Disconnected from ${title} server');\n      };\n    });\n  }\n\n  registerMessageHandler(handler) {\n    this.messageHandlers.push(handler);\n  }\n\n  // Method to handle message with callback\n  handleMessage(message, cb) {\n    if (cb) cb(message);\n  }\n\n  // Method to send an echo message to the server\n  sendEchoMessage(message) {\n    this.websocket.send(JSON.stringify(message));\n    console.log('Sent message to echo server:', message);\n  }\n\n  // Method to close the WebSocket connection\n  close() {\n    if (this.websocket) {\n      this.websocket.close();\n      console.log('WebSocket connection closed.');\n    }\n  }\n}\n\nmodule.exports = ${getClientName(info)};`}\n      </Text>\n    </File>);\n}"],"names":["getClientName","info","title","replace","char","toUpperCase","FileHeaderInfo","server","_jsxs","Text","children","_jsx","version","protocol","host","hasPathname","pathname","Requires","asyncapi","params","servers","get","File","name"],"mappings":"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"}